# UnieAI Studio 教學 - 第五章：API 金鑰管理

*🔑 掌握 API 金鑰：安全存取和權限管理的完整指南*

---

## 📋 本章學習目標

完成本章後，你將能夠：
- ✅ 理解 API 金鑰的重要性和安全機制
- ✅ 掌握創建和管理 API 金鑰的完整流程
- ✅ 學會設定適當的權限範圍和安全政策
- ✅ 實施 API 金鑰的安全儲存和輪換機制
- ✅ 監控金鑰使用情況和異常活動

**⏱️ 預估完成時間**: 30-40 分鐘  
**🎯 難度**: 中級 (需要安全意識)

---

## 🔑 第一節：API 金鑰概念

### 💡 什麼是 API 金鑰？

API 金鑰是 UnieAI Studio 提供的安全認證機制：
- 🔐 **安全存取認證** - 證明用戶身份和權限
- 🛡️ **權限控制** - 限制存取範圍和操作權限
- 📊 **使用監控** - 追蹤 API 調用和使用量
- 🔄 **靈活管理** - 創建、修改、停用、刪除
- ⏰ **有效期控制** - 設定金鑰生命週期

### 🆚 與其他認證方式的比較

| 認證方式 | 安全性 | 易用性 | 靈活性 | 成本 | 適用場景 |
|---------|--------|--------|--------|------|----------|
| **API 金鑰** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 免費 | 程式開發、應用整合 |
| **OAuth** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 免費 | 用戶登入、網站認證 |
| **密碼** | ⭐⭐ | ⭐⭐⭐ | ⭐⭐ | 免費 | 基礎網站登入 |

### 🎯 API 金鑰的價值

```
💎 使用 API 金鑰的優勢:
安全方面:
• 隔離應用程式存取權限
• 細粒度權限控制
• 隨時可以撤銷權限
• 詳細的使用記錄

管理方面:
• 集中化管理界面
• 即時監控和警報
• 批量金鑰管理
• 審計日誌追蹤

開發方面:
• 簡化整合流程
• 支援多種程式語言
• 詳細 API 文檔
• 測試和除錯工具
```

---

## 🛠️ 第二節：進入 API 金鑰管理

### 📍 訪問方法

```bash
🔑 進入 API 金鑰管理:
方法 1: Dashboard 點擊 "API 金鑰"
方法 2: 側邊欄導航找到 API 選項
方法 3: 直接訪問 https://studio.unieai.com/keys
方法 4: 從部署管理頁面進入
```

### 📸 API 管理界面展示

#### API 金鑰管理界面
![API 金鑰管理界面](../images/api-element-1.png)  
*API 金鑰管理：創建和管理 API 存取權限*

**界面說明**：
1. **金鑰列表區域**
   - 已創建的金鑰顯示
   - 金鑰名稱和描述
   - 創建日期和最後使用

2. **操作按鈕區域**
   - "創建金鑰" 按鈕
   - 管理操作選單
   - 複製和編輯功能

#### API 管理頁面完整
![API 管理頁面](../images/api-page-1.png)  
*API 管理頁面：完整的金鑰管理功能*

**功能特色**：
- 權限設定界面
- 使用統計顯示
- 安全設定選項
- 批量操作功能

---

## 🚀 第三節：創建 API 金鑰

### 📋 Step 1：金鑰信息設定

#### 基本信息
```
📝 必填信息:
金鑰名稱:
• 用於識別金鑰用途
• 建議格式: "[項目名稱]-[環境]-[用途]"
• 範例: "FinanceBot-Production-API-Access"

描述信息:
• 說明金鑰的具體用途
• 包含相關項目和聯絡人
• 記錄創建原因和預期使用

範例: "用於 FinanceBot 機器人的生產環境存取，需要 FinanceLLM 模型權限"
```

#### 範圍設定
```
🎯 權限範圍設定:
模型存取權限:
• FinanceLLM (Beta) - 如果使用金融模型
• 其他部署的模型
• 特定模型或全部模型

操作權限:
• 讀取權限 - 查看模型資訊
• 寫入權限 - 調用 AI 模型
• 管理權限 - 創建和刪除資源

網路存取:
• 允許的 IP 範圍
• 網路環境限制
• 安全政策設定
```

### 🔧 Step 2：安全設定

#### 安全政策
```
🛡️ 安全設定選項:
有效期設定:
• 永久有效 - 不建議
• 90 天 - 適合開發環境
• 180 天 - 適合測試環境
• 365 天 - 適合生產環境 (最長)

存取限制:
• IP 白名單 - 只允許特定 IP
• 網路環境 - 限制內網或外網
• 使用頻率 - 防止濫用
• 併發限制 - 防止過載

警報設定:
• 使用量異常警報
• 錯誤率過高警報
• 權限嘗試失敗警報
• 成本超限警報
```

#### 最佳安全實踐
```
🔒 安全最佳實踐:
創建時:
• 使用強金鑰名稱和描述
• 設定合理的有效期
• 實施最小權限原則
• 啟用所有安全警報

使用時:
• 安全儲存金鑰
• 使用環境變數
• 不在前端暴露金鑰
• 實施請求加密

維護時:
• 定期輪換金鑰
• 監控使用模式
• 撤銷不需要的金鑰
• 更新安全政策
```

### ✅ Step 3：完成創建

#### 創建流程
```
📋 創建步驟:
1. 點擊 "創建金鑰" 按鈕
2. 填寫金鑰基本資訊
3. 設定權限範圍
4. 配置安全選項
5. 確認創建設定
6. 複製生成的金鑰
7. 安全儲存金鑰
```

#### 金鑰格式和結構
```
🔑 API 金鑰格式:
結構組成:
• 前綴: "sk-" (Secret Key)
• 版本: "1" (API 版本)
• 金鑰 ID: 隨機字串
• 簽名: 數位簽名

範例格式:
sk-1-abcd1234-efgh5678-ijkl9012-mnop3456

安全特徵:
• 長度: 64 字元以上
• 隨機性: 加密安全隨機
• 唯一性: 確保不重複
• 驗證性: 可以驗證真實性
```

---

## 📊 第四節：金鑰管理操作

### 👀 查看和管理金鑰

#### 金鑰列表資訊
```
📋 顯示資訊:
基本信息:
• 金鑰名稱和描述
• 創建日期和時間
• 最後使用時間
• 當前狀態

使用統計:
• API 調用次數
• Token 使用量
• 成功率和錯誤率
• 平均響應時間

權限資訊:
• 存取模型列表
• 操作權限範圍
• 網路存取限制
• 有效期剩餘時間
```

#### 管理操作
```
🛠️ 可用操作:
編輯設定:
• 修改名稱和描述
• 調整權限範圍
• 更新安全設定
• 延長有效期

狀態控制:
• 啟用/停用金鑰
• 暫停使用 (節省成本)
• 刪除金鑰 (永久)
• 恢復已停用金鑰

監控功能:
• 查看詳細使用報告
• 下載使用日誌
• 設定使用警報
• 導出統計數據
```

### 🔄 金鑰輪換和更新

#### 輪換策略
```
🔄 輪換計劃:
定期輪換:
• 每 90 天 - 高安全環境
• 每 180 天 - 標準環境
• 每 365 天 - 低風險環境

事件驅動輪換:
• 疑似安全事件
• 權限異常使用
• 金鑰洩露風險
• 系統安全更新

批次輪換:
• 整個專案升級
• 安全政策變更
• 系統遷移
• 團隊變更
```

#### 輪換操作流程
```
📋 輪換步驟:
1. 創建新金鑰
2. 更新所有應用程式
3. 測試新金鑰功能
4. 監控新金鑰使用
5. 停用舊金鑰
6. 確認無舊金鑰使用
7. 刪除舊金鑰
```

---

## 🛡️ 第五節：安全最佳實踐

### 🔐 儲存和傳輸安全

#### 安全儲存原則
```
💾 儲存最佳實踐:
開發環境:
• 環境變數 (.env 檔案)
• 程式碼版本控制排除
• 開發者本地儲存

測試環境:
• 秘密管理服務
• 加密資料庫儲存
• 存取控制和審計

生產環境:
• 專業密鑰管理服務
• 硬體安全模組 (HSM)
• 金鑰輪換自動化
• 多層安全保護
```

#### 傳輸安全
```
🌐 傳輸安全:
網路加密:
• HTTPS 強制使用
• TLS 1.2+ 加密
• 證書驗證
• 中間人攻擊防護

API 呼叫安全:
• 請求簽名驗證
• 時間戳記檢查
• 重放攻擊防護
• 請求速率限制
```

### 👥 權限管理

#### 最小權限原則
```
⚖️ 權限設計:
應用程式權限:
• 只給予必要的模型存取
• 限制操作範圍
• 設定合理的併發限制
• 監控使用模式

團隊權限:
• 基於角色的存取控制
• 定期權限審查
• 權限變更審計
• 離職後權限撤銷
```

#### 審計和合規
```
📊 審計要求:
使用記錄:
• 所有 API 調用記錄
• 金鑰操作歷史
• 權限變更記錄
• 異常活動警報

合規檢查:
• 金鑰使用合規性
• 資料保護法規遵循
• 安全政策執行
• 風險評估報告
```

---

## 📊 第六節：使用監控和警報

### 📈 監控指標

#### 關鍵指標
```
📊 重要監控指標:
使用量指標:
• 每日/週/月 API 調用次數
• Token 使用量和成本
• 回應時間和品質
• 成功率統計

安全指標:
• 失敗請求比率
• 異常 IP 存取
• 權限拒絕次數
• 可疑活動模式

性能指標:
• 平均響應時間
• 併發使用率
• 系統可用性
• 錯誤率分析
```

#### 異常檢測
```
🚨 異常檢測:
使用異常:
• 突然的使用量激增
• 非典型使用時間
• 異常地理位置存取
• 大量失敗請求

安全異常:
• 來自新 IP 的存取
• 多次失敗認證嘗試
• 異常的使用模式
• 未授權的 API 調用
```

### 🔔 警報和通知

#### 警報設定
```
🔔 警報策略:
成本警報:
• 月度成本超出預算
• 單日使用量異常
• Token 消耗過快
• 計費異常增加

安全警報:
• 認證失敗率過高
• 異常 IP 存取
• 非典型使用模式
• 權限相關錯誤

技術警報:
• 響應時間過長
• 錯誤率超過閾值
• 服務可用性問題
• API 端點異常
```

---

## 🛠️ 第七節：實戰練習

### ✅ 練習項目

完成以下練習項目來確認你的理解：

#### 練習 1：創建測試金鑰
```
□ 進入 API 金鑰管理頁面
□ 點擊 "創建金鑰" 按鈕
□ 填寫測試金鑰信息:
  - 名稱: "Test-Bot-Development"
  - 描述: "用於測試機器人的開發環境"
□ 設定權限: 只允許測試模型存取
□ 設定有效期: 90 天
```

#### 練習 2：安全設定實施
```
□ 啟用使用量異常警報
□ 設定失敗率警報閾值
□ 配置成本控制警報
□ 測試警報功能
□ 記錄警報設定參數
```

#### 練習 3：金鑰管理操作
```
□ 查看金鑰詳細信息
□ 測試編輯金鑰設定
□ 模擬金鑰輪換流程
□ 測試停用/啟用功能
□ 確認所有操作正常
```

#### 練習 4：監控和報表
```
□ 查看使用統計報表
□ 檢查安全日誌
□ 導出使用數據
□ 分析使用模式
□ 建立監控儀表板
```

### 🔍 問題診斷

#### 常見金鑰問題
```
❌ 問題: API 調用返回 401 未授權
💡 解決: 檢查金鑰是否正確、是否啟用、權限是否足夠

❌ 問題: 金鑰無法創建
💡 解決: 確認帳戶權限，檢查金鑰名稱是否重複

❌ 問題: 成本超出預期
💡 解決: 檢查金鑰權限設定，實施成本監控

❌ 問題: 收到安全警報
💡 解決: 立即檢查金鑰使用狀況，暫停可疑活動

❌ 問題: 金鑰洩露風險
💡 解決: 立即輪換金鑰，檢查存取日誌，撤銷所有相關權限
```

---

## 📚 第八節：整合和應用

### 🔗 與應用整合

#### 常見整合場景
```
🎯 整合場景:
聊天機器人:
• 客服聊天機器人
• 個人助理 AI
• 專業諮詢系統
• 教育輔導工具

網站應用:
• 內容生成系統
• 智能搜索功能
• 個性化推薦
• 用戶互動增強

API 服務:
• 第三方服務整合
• 內部系統整合
• 行動應用後端
• 微服務架構
```

#### 整合最佳實踐
```
🏆 整合指南:
安全性:
• 金鑰安全儲存
• 請求加密傳輸
• 錯誤處理完善
• 權限檢查嚴格

性能:
• 請求重試機制
• 連接池優化
• 響應快取策略
• 併發控制合理

監控:
• 完整的日誌記錄
• 性能指標追蹤
• 錯誤監控警報
• 用戶體驗評估
```

---

## 📚 第九節：下一步學習

### 🎯 準備進入下一章

完成本章練習後，你應該已經：
- ✅ 理解 API 金鑰的重要性和安全機制
- ✅ 掌握創建和管理 API 金鑰的完整流程
- ✅ 學會設定適當的權限和安全政策
- ✅ 實施了監控和警報機制
- ✅ 建立了安全的金鑰管理流程

### 📖 下一章預覽

**第六章：Realtime API 測試**
- 瀏覽器內即時測試環境
- 參數調整和效果觀察
- 代碼自動生成和複製
- API 整合準備工作

### 💡 學習建議

```
🎯 API 金鑰管理最佳實踐:
• 定期審查和更新金鑰權限
• 實施全面的監控和警報
• 建立標準化的金鑰輪換流程
• 加強團隊的安全意識培訓
• 保持對安全威脅的警覺
```

---

## ✅ 本章檢查清單

完成本章學習後，請確認：

```
📋 API 金鑰管理檢查清單:
□ 理解 API 金鑰的重要性和價值
□ 熟悉 API 金鑰管理界面和功能
□ 成功創建第一個 API 金鑰
□ 設定適當的權限範圍和安全政策
□ 實施金鑰輪換和更新機制
□ 建立監控和警報系統
□ 完成所有實戰練習項目
□ 建立安全的金鑰管理流程
□ 準備進入第六章學習
□ 記錄金鑰管理最佳實踐
```

---

## 📞 獲得幫助

### 🆘 常見問題
```
❓ 如何選擇合適的金鑰有效期
💡 根據應用場景，開發環境 90 天，生產環境 180-365 天

❓ 金鑰洩露後應該怎麼做
💡 立即停用金鑰，創建新金鑰，更新所有應用程式

❓ 如何監控金鑰使用情況
💡 使用平台監控工具，設定警報，查看日誌

❓ 可以創建多少個 API 金鑰
💡 根據帳戶類型，通常沒有限制或有合理限制
```

### 📚 參考資源
```
📖 有用資源:
• API 金鑰管理最佳實踐指南
• 安全威脅防護手冊
• 合規要求參考資料
• 社群安全經驗分享
• 專業安全工具推薦
```

---

**🎊 恭喜完成第五章學習！你現在已經掌握了安全的 API 金鑰管理方法。**

**準備好進入第六章：Realtime API 測試**

---

**由 DotDot Max ✨ 編撰**  
*API 金鑰安全管理專家指南 | 2026-01-29*